# é¡¹ç›®ç»“æ„è¯´æ˜

## ç›®å½•æ ‘
```
mini-game/
â”‚
â”œâ”€â”€ ğŸ“ templates/                    # HTML æ¨¡æ¿ç›®å½•
â”‚   â”œâ”€â”€ index.html                  # âœ… ä¸»é¡µ - æ¸¸æˆåˆ—è¡¨å…¥å£
â”‚   â”œâ”€â”€ login.html                  # âœ… ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ user-management.html        # âœ… ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”œâ”€â”€ word-quest.html             # ğŸ® æ¸¸æˆ1: å­—å­—å¤§å†’é™©
â”‚   â”œâ”€â”€ multiplication-game.html    # ğŸ® æ¸¸æˆ2: ä¹˜æ³•å£è¯€è¡¨æ¶ˆæ¶ˆä¹
â”‚   â””â”€â”€ admin.html                  # âš™ï¸ è¯åº“ç®¡ç†åå°
â”‚
â”œâ”€â”€ ğŸ“ static/                       # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ css/                      # CSS æ ·å¼æ–‡ä»¶ï¼ˆé¢„ç•™ï¼‰
â”‚   â””â”€â”€ ğŸ“ js/                       # JavaScript æ–‡ä»¶ï¼ˆé¢„ç•™ï¼‰
â”‚
â”œâ”€â”€ ğŸ“„ app.py                        # ğŸ”¥ ä¸»åº”ç”¨ç¨‹åº
â”œâ”€â”€ ğŸ“„ words.py                      # ğŸ“ ç‹¬ç«‹è¯åº“æœåŠ¡ï¼ˆå¤‡ç”¨ï¼‰
â”œâ”€â”€ ğŸ“„ config.py                     # âš™ï¸ æ•°æ®åº“é…ç½®
â”œâ”€â”€ ğŸ“„ word_list.json                # ğŸ“š è¯åº“æ•°æ®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ requirements.txt              # ğŸ“¦ Python ä¾èµ–
â”œâ”€â”€ ğŸ“„ README.md                     # ğŸ“– é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md          # ğŸ“Š æœ¬æ–‡ä»¶
â””â”€â”€ ğŸ“„ add_role_column.sql           # ğŸ—„ï¸ æ•°æ®åº“è„šæœ¬
```

## æ¸¸æˆé¡µé¢è·¯ç”±

| æ¸¸æˆåç§° | è·¯ç”± | æ–‡ä»¶ | è¯´æ˜ |
|---------|------|------|------|
| ä¸»é¡µ | `/` æˆ– `/index` | index.html | æ˜¾ç¤ºæ‰€æœ‰æ¸¸æˆåˆ—è¡¨ |
| å­—å­—å¤§å†’é™© | `/word-quest` | word-quest.html | å¡«ç©ºæ¸¸æˆ |
| ä¹˜æ³•å£è¯€è¡¨æ¶ˆæ¶ˆä¹ | `/multiplication-game` | multiplication-game.html | é…å¯¹æ¸¸æˆ |
| è¯åº“ç®¡ç† | `/admin` | admin.html | åœ¨çº¿ç¼–è¾‘è¯åº“ |
| ç”¨æˆ·ç®¡ç† | `/user-management` | user-management.html | ç®¡ç†ç”¨æˆ·å’Œä¼šå‘˜ |
| ç™»å½• | `/login` | login.html | ç”¨æˆ·ç™»å½• |

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1ï¸âƒ£ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
```
ç™»å½• (/login) â†’ éªŒè¯ (API) â†’ ä¸»é¡µ (/) â†’ æ¸¸æˆé€‰æ‹©
```

### 2ï¸âƒ£ æ¸¸æˆç³»ç»Ÿ
```
ä¸»é¡µæ¸¸æˆåˆ—è¡¨ â†’ é€‰æ‹©æ¸¸æˆ â†’ æ¸¸æˆé¡µé¢ â†’ æ¸¸æˆé€»è¾‘ â†’ ç»“æœåé¦ˆ
```

### 3ï¸âƒ£ è¯åº“ç®¡ç†
```
ç®¡ç†åå° (/admin) â†’ å¢åˆ æ”¹è¯æ±‡ â†’ ä¿å­˜ API â†’ word_list.json
```

## API ç«¯ç‚¹æ€»è§ˆ

### ğŸ” è®¤è¯ç›¸å…³
- `POST /api/register` - æ³¨å†Œ
- `POST /api/login` - ç™»å½•
- `POST /api/logout` - ç™»å‡º
- `GET /api/check-auth` - æ£€æŸ¥ç™»å½•çŠ¶æ€

### ğŸ® æ¸¸æˆç›¸å…³
- `GET /api/games` - è·å–æ¸¸æˆåˆ—è¡¨
- `GET /start` - å¼€å§‹å­—å­—å¤§å†’é™©ï¼ˆè·å–é¢˜ç›®æ•°æ®ï¼‰

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /api/add-user` - æ·»åŠ ç”¨æˆ·
- `GET /api/user/score` - è·å–ç”¨æˆ·ç§¯åˆ†
- `GET /api/user/membership` - è·å–ä¼šå‘˜ä¿¡æ¯

### ğŸ“š è¯åº“ç®¡ç†
- `GET /api/words` - è·å–è¯åº“
- `POST /api/words` - ä¿å­˜è¯åº“ï¼ˆå¢åˆ æ”¹ï¼‰

## æ•°æ®æµå‘

### å­—å­—å¤§å†’é™©æ•°æ®æµ
```
1. ç”¨æˆ·è®¿é—® /word-quest
2. é¡µé¢åŠ è½½åè°ƒç”¨ GET /start
3. åç«¯ä» word_list.json è¯»å–è¯åº“
4. éšæœºæŠ½å–å¹¶ç”Ÿæˆé¢˜ç›®
5. è¿”å›é¢˜ç›®æ•°æ®ç»™å‰ç«¯
6. ç”¨æˆ·ç­”é¢˜
7. å‰ç«¯éªŒè¯ç­”æ¡ˆ
8. æ˜¾ç¤ºç»“æœ
```

### è¯åº“ç®¡ç†æ•°æ®æµ
```
1. ç®¡ç†å‘˜è®¿é—® /admin
2. é¡µé¢è°ƒç”¨ GET /api/words åŠ è½½è¯åº“
3. ç®¡ç†å‘˜è¿›è¡Œå¢åˆ æ”¹æ“ä½œ
4. è°ƒç”¨ POST /api/words ä¿å­˜
5. åç«¯éªŒè¯æ•°æ®ï¼ˆæœ€å¤š40ä¸ªï¼Œæ ¼å¼æ£€æŸ¥ï¼‰
6. å†™å…¥ word_list.json
7. è¿”å›æˆåŠŸ/å¤±è´¥æ¶ˆæ¯
```

## æ•°æ®åº“è¡¨ç»“æ„

### users è¡¨
- id (ä¸»é”®)
- username (ç”¨æˆ·å)
- password (å¯†ç ï¼ŒMD5åŠ å¯†)
- role (è§’è‰²: admin/user)

### members è¡¨
- id (ä¸»é”®)
- user_id (å¤–é”® â†’ users.id)
- membership_type (ä¼šå‘˜ç±»å‹: free/premium)
- start_date (å¼€å§‹æ—¥æœŸ)
- end_date (ç»“æŸæ—¥æœŸ)

### scores è¡¨
- id (ä¸»é”®)
- user_id (å¤–é”® â†’ users.id)
- score (ç§¯åˆ†)
- game_name (æ¸¸æˆåç§°)

## æŠ€æœ¯ç»†èŠ‚

### Flask åº”ç”¨é…ç½®
- **æ¨¡æ¿ç›®å½•**: `templates/`
- **é™æ€ç›®å½•**: `static/`
- **ç«¯å£**: 3002
- **è°ƒè¯•æ¨¡å¼**: True (å¼€å‘ç¯å¢ƒ)

### å®‰å…¨æœºåˆ¶
- Session ç®¡ç†ï¼ˆFlask Sessionï¼‰
- ç™»å½•éªŒè¯è£…é¥°å™¨ `@login_required`
- å¯†ç  MD5 åŠ å¯†
- è·¯ç”±æƒé™æ§åˆ¶

### è¯åº“æ ¼å¼ (word_list.json)
```json
[
  {
    "word": "apple",
    "missing": "a",
    "type": "en"
  },
  {
    "word": "ä¸­å›½",
    "missing": "å›½",
    "type": "cn"
  }
]
```

## æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°æ¸¸æˆçš„æ­¥éª¤ï¼š

1. **åˆ›å»ºæ¸¸æˆ HTML æ–‡ä»¶**
   ```
   templates/new-game.html
   ```

2. **åœ¨ app.py ä¸­æ³¨å†Œæ¸¸æˆ**
   ```python
   GAMES = [
       {'name': 'æ–°æ¸¸æˆåç§°', 'route': '/new-game', 'file': 'new-game.html'}
   ]
   ```

3. **æ·»åŠ è·¯ç”±å¤„ç†**
   ```python
   @app.route('/new-game')
   def new_game():
       if 'user_id' not in session:
           return redirect('/login')
       return render_template('new-game.html')
   ```

4. **ï¼ˆå¯é€‰ï¼‰æ·»åŠ æ¸¸æˆä¸“å± API**
   ```python
   @app.route('/api/new-game/start')
   def start_new_game():
       # æ¸¸æˆé€»è¾‘
       return jsonify({'data': 'game_data'})
   ```

## ç»´æŠ¤å»ºè®®

1. **å®šæœŸå¤‡ä»½**
   - word_list.json
   - MySQL æ•°æ®åº“

2. **æ—¥å¿—ç›‘æ§**
   - æ·»åŠ æ—¥å¿—è®°å½•åŠŸèƒ½
   - ç›‘æ§ç”¨æˆ·æ´»åŠ¨

3. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨ Redis ç¼“å­˜è¯åº“æ•°æ®
   - æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–

4. **å®‰å…¨åŠ å›º**
   - ä½¿ç”¨æ›´å¼ºçš„å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
   - æ·»åŠ  CSRF ä¿æŠ¤
   - å®æ–½ HTTPS

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•é‡ç½®è¯åº“ï¼Ÿ**
A: è®¿é—® `/admin` é¡µé¢ï¼Œåˆ é™¤æ‰€æœ‰å•è¯åé‡æ–°æ·»åŠ 

**Q: å¦‚ä½•æ·»åŠ ç®¡ç†å‘˜è´¦æˆ·ï¼Ÿ**
A: åœ¨æ³¨å†Œæ—¶å°† role è®¾ç½®ä¸º 'admin'ï¼Œæˆ–ç›´æ¥åœ¨æ•°æ®åº“ä¿®æ”¹

**Q: æ¸¸æˆåŠ è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: æ£€æŸ¥æ˜¯å¦å·²ç™»å½•ï¼Œæ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œï¼Œæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

**Q: è¯åº“ä¸Šé™ä¸ºä»€ä¹ˆæ˜¯40ä¸ªï¼Ÿ**
A: ä¸ºä¿è¯æ¸¸æˆä½“éªŒå’Œæ€§èƒ½ï¼Œå¯åœ¨ `app.py` ä¸­ä¿®æ”¹ `POST /api/words` çš„éªŒè¯é€»è¾‘è°ƒæ•´ä¸Šé™
