<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰πòÊ≥ïÂè£ËØÄË°®Ê∂àÊ∂à‰πê</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'ÂæÆËΩØÈõÖÈªë', sans-serif;
        }
        
        body {
            background-color: #e6f7ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        header {
            width: 100%;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #3399ff;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            margin-top: 20px;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 80%;
            max-width: 800px;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .restart-btn {
            background-color: #3399ff;
            color: white;
            border: none;
            padding: 8px 20px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .restart-btn:hover {
            background-color: #5db3ff;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .sound-btn {
            background-color: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 20px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .sound-btn:hover {
            background-color: #ff8e8e;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 15px;
            width: 80%;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .bubble {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s ease;
            box-shadow: 
                inset 0 -8px 10px rgba(0, 0, 0, 0.2),
                inset 0 8px 10px rgba(255, 255, 255, 0.5),
                0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .bubble::after {
            content: '';
            position: absolute;
            top: 10%;
            left: 20%;
            width: 30%;
            height: 20%;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            transform: rotate(45deg);
        }
        
        .bubble.selected {
            transform: scale(1.1);
            box-shadow: 
                inset 0 -8px 10px rgba(0, 0, 0, 0.2),
                inset 0 8px 10px rgba(255, 255, 255, 0.5),
                0 0 15px 5px rgba(51, 153, 255, 0.7);
        }
        
        .bubble.matched {
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }
        
        .victory-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            color: white;
            display: none;
        }
        
        .victory-content {
            background: linear-gradient(135deg, #3399ff, #66ccff);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 80%;
        }
        
        .victory-content h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .victory-content p {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }
        
        .continue-btn {
            background-color: #ffcc00;
            color: #333;
            border: none;
            padding: 12px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .continue-btn:hover {
            background-color: #ffd633;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        @media (max-width: 768px) {
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: repeat(5, 1fr);
            }
            
            h1 {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            .game-board {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(6, 1fr);
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .bubble {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>‰πòÊ≥ïÂè£ËØÄË°®Ê∂àÊ∂à‰πê</h1>
    </header>
    
    <div class="game-info">
        <div class="timer">Áî®Êó∂: <span id="time">00:00</span></div>
        <button class="restart-btn" id="restartBtn">ÈáçÊñ∞ÂºÄÂßã</button>
        <button class="sound-btn" id="soundBtn">üîä Èü≥Êïà</button>
        <div class="pairs">Â∑≤ÈÖçÂØπ: <span id="pairs">0</span>/10</div>
    </div>
    
    <div class="game-board" id="gameBoard">
        <!-- Ê≥°Ê≥°Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
    </div>
    
    <div class="victory-screen" id="victoryScreen">
        <div class="victory-content">
            <h2>ÊÅ≠ÂñúÊåëÊàòÊàêÂäüÔºÅ</h2>
            <p>ÂÆåÊàêÊó∂Èó¥: <span id="finalTime">00:00</span></p>
            <button class="continue-btn" id="continueBtn">ÁªßÁª≠ÊåëÊàò</button>
        </div>
    </div>

    <script>
        // Èü≥È¢ë‰∏ä‰∏ãÊñá
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let soundEnabled = true;
        
        // Èü≥ÊïàÂáΩÊï∞
        function playSound(type) {
            if (!soundEnabled) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            const now = audioContext.currentTime;
            
            switch(type) {
                case 'select': // ÈÄâ‰∏≠Ê≥°Ê≥° - ËΩªÂø´ÁöÑÁÇπÂáªÈü≥
                    oscillator.frequency.setValueAtTime(800, now);
                    oscillator.frequency.exponentialRampToValueAtTime(600, now + 0.1);
                    gainNode.gain.setValueAtTime(0.2, now);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                    oscillator.type = 'sine';
                    oscillator.start(now);
                    oscillator.stop(now + 0.1);
                    break;
                    
                case 'match': // ÂåπÈÖçÊàêÂäü - Ê¨¢Âø´ÁöÑ‰∏äÂçáÈü≥
                    const matchMelody = [
                        {freq: 523, time: 0},      // C5
                        {freq: 659, time: 0.1},    // E5
                        {freq: 784, time: 0.2},    // G5
                    ];
                    matchMelody.forEach(note => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.value = note.freq;
                        gain.gain.setValueAtTime(0.25, now + note.time);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + note.time + 0.15);
                        osc.type = 'sine';
                        osc.start(now + note.time);
                        osc.stop(now + note.time + 0.15);
                    });
                    return;
                    
                case 'wrong': // ÂåπÈÖçÈîôËØØ - ÊüîÂíåÁöÑ‰∏ãÈôçÈü≥
                    oscillator.frequency.setValueAtTime(400, now);
                    oscillator.frequency.exponentialRampToValueAtTime(250, now + 0.25);
                    gainNode.gain.setValueAtTime(0.2, now);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.25);
                    oscillator.type = 'sine';
                    oscillator.start(now);
                    oscillator.stop(now + 0.25);
                    break;
                    
                case 'pop': // Ê≥°Ê≥°Ê∂àÂ§± - ËΩªÁõàÁöÑÊ≥°Ê≥°ÁàÜÁÇ∏Èü≥
                    oscillator.frequency.setValueAtTime(1200, now);
                    oscillator.frequency.exponentialRampToValueAtTime(100, now + 0.2);
                    gainNode.gain.setValueAtTime(0.15, now);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
                    oscillator.type = 'sine';
                    oscillator.start(now);
                    oscillator.stop(now + 0.2);
                    break;
                    
                case 'victory': // ËÉúÂà© - Ê¨¢Âø´ÁöÑÊóãÂæã
                    const victoryMelody = [
                        {freq: 523, time: 0},      // C5
                        {freq: 587, time: 0.15},   // D5
                        {freq: 659, time: 0.3},    // E5
                        {freq: 698, time: 0.45},   // F5
                        {freq: 784, time: 0.6},    // G5
                        {freq: 1047, time: 0.75},  // C6
                        {freq: 784, time: 0.9},    // G5
                        {freq: 1047, time: 1.05}   // C6
                    ];
                    victoryMelody.forEach(note => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.value = note.freq;
                        gain.gain.setValueAtTime(0.2, now + note.time);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + note.time + 0.2);
                        osc.type = 'sine';
                        osc.start(now + note.time);
                        osc.stop(now + note.time + 0.2);
                    });
                    return;
                    
                case 'click': // ÊåâÈíÆÁÇπÂáª
                    oscillator.frequency.setValueAtTime(600, now);
                    gainNode.gain.setValueAtTime(0.15, now);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                    oscillator.type = 'sine';
                    oscillator.start(now);
                    oscillator.stop(now + 0.05);
                    break;
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const gameBoard = document.getElementById('gameBoard');
            const timeDisplay = document.getElementById('time');
            const pairsDisplay = document.getElementById('pairs');
            const victoryScreen = document.getElementById('victoryScreen');
            const finalTimeDisplay = document.getElementById('finalTime');
            const continueBtn = document.getElementById('continueBtn');
            const restartBtn = document.getElementById('restartBtn');
            const soundBtn = document.getElementById('soundBtn');
            
            let selectedBubble = null;
            let matchedPairs = 0;
            let totalPairs = 10;
            let startTime;
            let timerInterval;
            
            // ÁîüÊàê‰πòÊ≥ïÂè£ËØÄË°®ÈÖçÂØπ
            function generatePairs() {
                const pairs = [];
                
                // ÁîüÊàê1-9ÁöÑ‰πòÊ≥ïÂè£ËØÄË°®
                for (let i = 1; i <= 9; i++) {
                    for (let j = i; j <= 9; j++) {
                        pairs.push({
                            question: `${i}√ó${j}`,
                            answer: i * j
                        });
                    }
                }
                
                // ÈöèÊú∫ÈÄâÊã©10‰∏™‰∏çÈáçÂ§çÁöÑÈÖçÂØπ
                const selectedPairs = [];
                while (selectedPairs.length < totalPairs && pairs.length > 0) {
                    const randomIndex = Math.floor(Math.random() * pairs.length);
                    selectedPairs.push(pairs[randomIndex]);
                    pairs.splice(randomIndex, 1);
                }
                
                return selectedPairs;
            }
            
            // ÂàõÂª∫Ê≥°Ê≥°ÂÖÉÁ¥†
            function createBubbles(pairs) {
                gameBoard.innerHTML = '';
                
                // ÂàõÂª∫ÈóÆÈ¢òÂíåÁ≠îÊ°àÁöÑÊï∞ÁªÑ
                const items = [];
                pairs.forEach(pair => {
                    items.push({
                        type: 'question',
                        value: pair.question,
                        answer: pair.answer
                    });
                    items.push({
                        type: 'answer',
                        value: pair.answer.toString(),
                        answer: pair.answer
                    });
                });
                
                // ÈöèÊú∫ÊéíÂ∫è
                shuffleArray(items);
                
                // ÂàõÂª∫Ê≥°Ê≥°
                items.forEach(item => {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';
                    bubble.textContent = item.type === 'question' ? `${item.value}=?` : item.value;
                    bubble.dataset.type = item.type;
                    bubble.dataset.value = item.value;
                    bubble.dataset.answer = item.answer;
                    
                    // ÈöèÊú∫È¢úËâ≤
                    const hue = Math.floor(Math.random() * 360);
                    bubble.style.background = `linear-gradient(135deg, hsl(${hue}, 80%, 65%), hsl(${hue}, 80%, 45%))`;
                    
                    bubble.addEventListener('click', handleBubbleClick);
                    gameBoard.appendChild(bubble);
                });
            }
            
            // Â§ÑÁêÜÊ≥°Ê≥°ÁÇπÂáª
            function handleBubbleClick(e) {
                const bubble = e.currentTarget;
                
                // Â¶ÇÊûúÊ≥°Ê≥°Â∑≤ÁªèÂåπÈÖçÔºåÂøΩÁï•ÁÇπÂáª
                if (bubble.classList.contains('matched')) return;
                
                // Êí≠ÊîæÈÄâ‰∏≠Èü≥Êïà
                playSound('select');
                
                // Â¶ÇÊûúÂ∑≤ÁªèÈÄâ‰∏≠‰∫Ü‰∏Ä‰∏™Ê≥°Ê≥°
                if (selectedBubble) {
                    // Â¶ÇÊûúÁÇπÂáªÁöÑÊòØÂêå‰∏Ä‰∏™Ê≥°Ê≥°ÔºåÂèñÊ∂àÈÄâÊã©
                    if (selectedBubble === bubble) {
                        selectedBubble.classList.remove('selected');
                        selectedBubble = null;
                        return;
                    }
                    
                    // Ê£ÄÊü•ÊòØÂê¶ÂåπÈÖç
                    const isMatch = checkMatch(selectedBubble, bubble);
                    
                    if (isMatch) {
                        // Êí≠ÊîæÂåπÈÖçÊàêÂäüÈü≥Êïà
                        playSound('match');
                        
                        // ÂåπÈÖçÊàêÂäü
                        setTimeout(() => {
                            // Êí≠ÊîæÊ≥°Ê≥°Ê∂àÂ§±Èü≥Êïà
                            playSound('pop');
                            
                            selectedBubble.classList.add('matched');
                            bubble.classList.add('matched');
                            selectedBubble = null;
                            
                            matchedPairs++;
                            pairsDisplay.textContent = matchedPairs;
                            
                            // Ê£ÄÊü•ÊòØÂê¶ÂÆåÊàêÊ∏∏Êàè
                            if (matchedPairs === totalPairs) {
                                endGame();
                            }
                        }, 300);
                    } else {
                        // Êí≠ÊîæÈîôËØØÈü≥Êïà
                        playSound('wrong');
                        
                        // ÂåπÈÖçÂ§±Ë¥•
                        bubble.classList.add('selected');
                        setTimeout(() => {
                            selectedBubble.classList.remove('selected');
                            bubble.classList.remove('selected');
                            selectedBubble = null;
                        }, 1000);
                    }
                } else {
                    // Á¨¨‰∏ÄÊ¨°ÈÄâÊã©Ê≥°Ê≥°
                    bubble.classList.add('selected');
                    selectedBubble = bubble;
                }
            }
            
            // Ê£ÄÊü•‰∏§‰∏™Ê≥°Ê≥°ÊòØÂê¶ÂåπÈÖç
            function checkMatch(bubble1, bubble2) {
                // Á°Æ‰øù‰∏Ä‰∏™ÊòØÈóÆÈ¢òÔºå‰∏Ä‰∏™ÊòØÁ≠îÊ°à
                if (bubble1.dataset.type === bubble2.dataset.type) return false;
                
                // Ëé∑ÂèñÈóÆÈ¢òÂíåÁ≠îÊ°àÊ≥°Ê≥°
                const questionBubble = bubble1.dataset.type === 'question' ? bubble1 : bubble2;
                const answerBubble = bubble1.dataset.type === 'answer' ? bubble1 : bubble2;
                
                // Ê£ÄÊü•Á≠îÊ°àÊòØÂê¶Ê≠£Á°Æ
                return parseInt(questionBubble.dataset.answer) === parseInt(answerBubble.dataset.value);
            }
            
            // Êï∞ÁªÑÈöèÊú∫ÊéíÂ∫è
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            // ÂºÄÂßãÊ∏∏Êàè
            function startGame() {
                matchedPairs = 0;
                pairsDisplay.textContent = matchedPairs;
                selectedBubble = null;
                
                // ÁîüÊàêÈÖçÂØπÂπ∂ÂàõÂª∫Ê≥°Ê≥°
                const pairs = generatePairs();
                createBubbles(pairs);
                
                // ÂºÄÂßãËÆ°Êó∂
                startTime = new Date();
                clearInterval(timerInterval);
                timerInterval = setInterval(updateTimer, 1000);
                
                // ÈöêËóèËÉúÂà©ÁïåÈù¢
                victoryScreen.style.display = 'none';
            }
            
            // Êõ¥Êñ∞ËÆ°Êó∂Âô®
            function updateTimer() {
                const currentTime = new Date();
                const elapsedTime = Math.floor((currentTime - startTime) / 1000);
                const minutes = Math.floor(elapsedTime / 60).toString().padStart(2, '0');
                const seconds = (elapsedTime % 60).toString().padStart(2, '0');
                timeDisplay.textContent = `${minutes}:${seconds}`;
            }
            
            // ÁªìÊùüÊ∏∏Êàè
            function endGame() {
                clearInterval(timerInterval);
                finalTimeDisplay.textContent = timeDisplay.textContent;
                
                // Êí≠ÊîæËÉúÂà©Èü≥Êïà
                setTimeout(() => playSound('victory'), 300);
                
                victoryScreen.style.display = 'flex';
            }
            
            // ÁªßÁª≠ÊåëÊàòÊåâÈíÆ‰∫ã‰ª∂
            continueBtn.addEventListener('click', () => {
                playSound('click');
                startGame();
            });

            // ÈáçÊñ∞ÂºÄÂßãÊåâÈíÆ‰∫ã‰ª∂
            restartBtn.addEventListener('click', () => {
                playSound('click');
                startGame();
            });
            
            // Èü≥ÊïàÂºÄÂÖ≥ÊåâÈíÆ
            soundBtn.addEventListener('click', () => {
                soundEnabled = !soundEnabled;
                soundBtn.textContent = soundEnabled ? 'üîä Èü≥Êïà' : 'üîá ÈùôÈü≥';
                if (soundEnabled) playSound('click');
            });

            // ÂàùÂßãÂåñÊ∏∏Êàè
            startGame();
        });
    </script>
</body>
</html>